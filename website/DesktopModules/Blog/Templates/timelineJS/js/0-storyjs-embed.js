/*
	StoryJS
	Designed and built by Zach Wise at VéritéCo

	This Source Code Form is subject to the terms of the Mozilla Public
	License, v. 2.0. If a copy of the MPL was not distributed with this
	file, You can obtain one at http://mozilla.org/MPL/2.0/.
*/
function getEmbedScriptPath(a){var f=document.getElementsByTagName("script"),c="",d="";for(var b=0;b<f.length;b++){f[b].src.match(a)&&(c=f[b].src)}c!=""&&(d="/");return c.split("?")[0].split("/").slice(0,-1).join("/")+d}function createStoryJS(A,R){function D(){LoadLib.js(F.js,Z)}function Z(){H.js=!0;F.lang!="en"?LazyLoad.js(q.locale,k):H.language=!0;Y()}function k(){H.language=!0;Y()}function X(){H.css=!0;Y()}function B(){H.font.css=!0;Y()}function Q(){H.font.js=!0;Y()}function Y(){if(H.checks>40){return}H.checks++;if(H.js&&H.css&&H.font.css&&H.font.js&&H.language){if(!H.finished){H.finished=!0;K()}}else{H.timeout=setTimeout("onloaded_check_again();",250)}}function U(){var a="storyjs-embed";O=document.createElement("div");F.embed_id!=""?G=document.getElementById(F.embed_id):G=document.getElementById("timeline-embed");G.appendChild(O);O.setAttribute("id",F.id);if(F.width.toString().match("%")){G.style.width=F.width.split("%")[0]+"%"}else{F.width=F.width-2;G.style.width=F.width+"px"}if(F.height.toString().match("%")){G.style.height=F.height;a+=" full-embed";G.style.height=F.height.split("%")[0]+"%"}else{if(F.width.toString().match("%")){a+=" full-embed";F.height=F.height-16;G.style.height=F.height+"px"}else{a+=" sized-embed";F.height=F.height-16;G.style.height=F.height+"px"}}G.setAttribute("class",a);G.setAttribute("className",a);O.style.position="relative"}function K(){VMM.debug=F.debug;J=new VMM.Timeline(F.id);J.init(F);L&&VMM.bindEvent(global,onHeadline,"HEADLINE")}var J,O,G,P,L=!1,V="2.17",j="1.7.1",C="",H={timeout:"",checks:0,finished:!1,js:!1,css:!1,jquery:!1,has_jquery:!1,language:!1,font:{css:!1,js:!1}},q={base:embed_path,css:embed_path+"css/",js:embed_path+"js/",locale:embed_path+"js/locale/",jquery:"http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js",font:{google:!1,css:embed_path+"css/themes/font/",js:"http://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js"}},F={version:V,debug:!1,type:"timeline",id:"storyjs",embed_id:"timeline-embed",embed:!0,width:"100%",height:"100%",source:"https://docs.google.com/spreadsheet/pub?key=0Agl_Dv6iEbDadFYzRjJPUGktY0NkWXFUWkVIZDNGRHc&output=html",lang:"en",font:"default",css:q.css+"timeline.css?"+V,js:"",api_keys:{google:"",flickr:"",twitter:""},gmap_key:""},M=[{name:"Merriweather-NewsCycle",google:["News+Cycle:400,700:latin","Merriweather:400,700,900:latin"]},{name:"NewsCycle-Merriweather",google:["News+Cycle:400,700:latin","Merriweather:300,400,700:latin"]},{name:"PoiretOne-Molengo",google:["Poiret+One::latin","Molengo::latin"]},{name:"Arvo-PTSans",google:["Arvo:400,700,400italic:latin","PT+Sans:400,700,400italic:latin"]},{name:"PTSerif-PTSans",google:["PT+Sans:400,700,400italic:latin","PT+Serif:400,700,400italic:latin"]},{name:"PT",google:["PT+Sans+Narrow:400,700:latin","PT+Sans:400,700,400italic:latin","PT+Serif:400,700,400italic:latin"]},{name:"DroidSerif-DroidSans",google:["Droid+Sans:400,700:latin","Droid+Serif:400,700,400italic:latin"]},{name:"Lekton-Molengo",google:["Lekton:400,700,400italic:latin","Molengo::latin"]},{name:"NixieOne-Ledger",google:["Nixie+One::latin","Ledger::latin"]},{name:"AbrilFatface-Average",google:["Average::latin","Abril+Fatface::latin"]},{name:"PlayfairDisplay-Muli",google:["Playfair+Display:400,400italic:latin","Muli:300,400,300italic,400italic:latin"]},{name:"Rancho-Gudea",google:["Rancho::latin","Gudea:400,700,400italic:latin"]},{name:"Bevan-PotanoSans",google:["Bevan::latin","Pontano+Sans::latin"]},{name:"BreeSerif-OpenSans",google:["Bree+Serif::latin","Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800:latin"]},{name:"SansitaOne-Kameron",google:["Sansita+One::latin","Kameron:400,700:latin"]},{name:"Lora-Istok",google:["Lora:400,700,400italic,700italic:latin","Istok+Web:400,700,400italic,700italic:latin"]},{name:"Pacifico-Arimo",google:["Pacifico::latin","Arimo:400,700,400italic,700italic:latin"]}];if(typeof A=="object"){for(P in A){Object.prototype.hasOwnProperty.call(A,P)&&(F[P]=A[P])}}typeof R!="undefined"&&(F.source=R);if(typeof url_config=="object"){L=!0;F.source.match("docs.google.com")||F.source.match("json")||F.source.match("storify")||(F.source="https://docs.google.com/spreadsheet/pub?key="+F.source+"&output=html")}if(F.js.match("locale")){F.lang=F.js.split("locale/")[1].replace(".js","");F.js=q.js+"timeline-min.js?"+V}if(!F.js.match("/")){F.css=q.css+F.type+".css?"+V;F.js=q.js+F.type;F.debug?F.js+=".js?"+V:F.js+="-min.js?"+V;F.id="storyjs-"+F.type}F.lang.match("/")?q.locale=F.lang:q.locale=q.locale+F.lang+".js?"+V;U();LoadLib.css(F.css,X);if(F.font=="default"){H.font.js=!0;H.font.css=!0}else{var z;if(F.font.match("/")){z=F.font.split(".css")[0].split("/");q.font.name=z[z.length-1];q.font.css=F.font}else{q.font.name=F.font;q.font.css=q.font.css+F.font+".css?"+V}LoadLib.css(q.font.css,B);for(var W=0;W<M.length;W++){if(q.font.name==M[W].name){q.font.google=!0;WebFontConfig={google:{families:M[W].google}}}}q.font.google?LoadLib.js(q.font.js,Q):H.font.js=!0}try{H.has_jquery=jQuery;H.has_jquery=!0;if(H.has_jquery){var C=parseFloat(jQuery.fn.jquery);C<parseFloat(j)?H.jquery=!1:H.jquery=!0}}catch(I){H.jquery=!1}H.jquery?D():LoadLib.js(q.jquery,D);this.onloaded_check_again=function(){Y()}}LazyLoad=function(g){function z(f,c){var e=g.createElement(f),a;for(a in c){c.hasOwnProperty(a)&&e.setAttribute(a,c[a])}return e}function b(a){var h=w[a],c,f;if(h){c=h.callback;f=h.urls;f.shift();m=0;if(!f.length){c&&c.call(h.context,h.obj);w[a]=null;x[a].length&&p(a)}}}function j(){var a=navigator.userAgent;y={async:g.createElement("script").async===!0};(y.webkit=/AppleWebKit\//.test(a))||(y.ie=/MSIE/.test(a))||(y.opera=/Opera/.test(a))||(y.gecko=/Gecko\//.test(a))||(y.unknown=!0)}function p(h,s,n,t,c){var A=function(){b(h)},r=h==="css",f=[],D,a,B,e,u,C;y||j();if(s){s=typeof s=="string"?[s]:s.concat();if(r||y.async||y.gecko||y.opera){x[h].push({urls:s,callback:n,obj:t,context:c})}else{for(D=0,a=s.length;D<a;++D){x[h].push({urls:[s[D]],callback:D===a-1?n:null,obj:t,context:c})}}}if(w[h]||!(e=w[h]=x[h].shift())){return}q||(q=g.head||g.getElementsByTagName("head")[0]);u=e.urls;for(D=0,a=u.length;D<a;++D){C=u[D];if(r){B=y.gecko?z("style"):z("link",{href:C,rel:"stylesheet"})}else{B=z("script",{src:C});B.async=!1}B.className="lazyload";B.setAttribute("charset","utf-8");if(y.ie&&!r){B.onreadystatechange=function(){if(/loaded|complete/.test(B.readyState)){B.onreadystatechange=null;A()}}}else{if(r&&(y.gecko||y.webkit)){if(y.webkit){e.urls[D]=B.href;k()}else{B.innerHTML='@import "'+C+'";';d(B)}}else{B.onload=B.onerror=A}}f.push(B)}for(D=0,a=f.length;D<a;++D){q.appendChild(f[D])}}function d(a){var f;try{f=!!a.sheet.cssRules}catch(c){m+=1;m<200?setTimeout(function(){d(a)},50):f&&b("css");return}b("css")}function k(){var a=w.css,c;if(a){c=v.length;while(--c>=0){if(v[c].href===a.urls[0]){b("css");break}}m+=1;a&&(m<200?setTimeout(k,50):b("css"))}}var y,q,w={},m=0,x={css:[],js:[]},v=g.styleSheets;return{css:function(a,h,c,f){p("css",a,h,c,f)},js:function(a,h,c,f){p("js",a,h,c,f)}}}(this.document);LoadLib=function(a){function b(d){var f=0,g=!1;for(f=0;f<c.length;f++){c[f]==d&&(g=!0)}if(g){return !0}c.push(d);return !1}var c=[];return{css:function(d,h,g,f){b(d)||LazyLoad.css(d,h,g,f)},js:function(d,h,g,f){b(d)||LazyLoad.js(d,h,g,f)}}}(this.document);var WebFontConfig;if(typeof embed_path=="undefined"||typeof embed_path=="undefined"){var embed_path=getEmbedScriptPath("storyjs-embed.js").split("js/")[0]}(function(){typeof url_config=="object"?createStoryJS(url_config):typeof timeline_config=="object"?createStoryJS(timeline_config):typeof storyjs_config=="object"?createStoryJS(storyjs_config):typeof config=="object"&&createStoryJS(config)})();